/*! For license information please see f74d91fd-ab0fd3f8a90b4e4c2f28.js.LICENSE.txt */
"use strict";(self.webpackChunkportal_template=self.webpackChunkportal_template||[]).push([[226],{98582:function(e,t,n){n.d(t,{l0:function(){return We},UU:function(){return ve},U$:function(){return fe}});var r=n(3013),i=n(26406);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function p(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return n}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C,S=(function(e){function t(e,t){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t[Math.abs(n)%t.length]}function n(e,t){var n=t.namespace;if(t.useColors){var r=t.color,i="  ".concat("[3"+(r<8?r:"8;5;"+r),";1m").concat(n," [0m");e[0]=i+e[0].split("\n").join("\n"+i)}else e[0]=n+" "+e[0]}function r(e,t){if(e[0]=(t.useColors?"%c":"")+t.namespace,t.useColors){var n="color: "+t.color,r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),e.splice(i,0,n)}}var a=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];e&&i.unshift(e);var o=n.namespaces.split(",").map((function(e){return"*"===e[e.length-1]?new RegExp("^"+e.slice(0,e.length-1)+".*$"):new RegExp("^"+e+"$")}));o.some((function(t){return t.test(e)})),t(e,n.colors),n.useColors}}void 0===i||"renderer"===i.type||!0===i.browser||i.__nwjs?e.exports=function(e){return o(e,function(){var e;try{e=localStorage.getItem("debug")}catch(t){}return!e&&void 0!==i&&"env"in i&&(e={}.DEBUG),{namespaces:e||"",colors:a,useColors:!0,formatArgs:r}}())}:e.exports=function(e){return o(e,{namespaces:{}.DEBUG||"",colors:[6,2,3,4,5,1],useColors:!0,formatArgs:n})}}(C={exports:{}},C.exports),C.exports),E=S("informed:ObjMap\t"),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String.prototype.replace.call(e,/\['(.+?)'\]/g,".$1").split(/[,[\].]+?/).filter(Boolean)},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=String.prototype.replace.call(t,/\['(.+?)'\]/g,".$1").split(/[,[\].]+?/).filter(Boolean).reduce((function(e,t){return null!=e?e[t]:e}),e);return void 0===r||r===e?n:r},A=function(e){return".".concat(e).replace(/(.*)[.[].*/,"$1").replace(/\./,"")},x=function(e,t){var n=A(t),r=function(e){return e.replace(A(e),"").replace(/\./,"")}(t),i=n?k(e,n):e;return!(!i||!Object.hasOwnProperty.call(i,r.replace(/\[(.*)\]/,"$1")))},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;String.prototype.replace.call(t,/\['(.+?)'\]/g,".$1").split(/[,[\].]+?/).filter(Boolean).reduce((function(e,t,r,i){return r===i.length-1?(e[t]=n,e[t]):void 0===e[t]?(Number.isInteger(+i[r+1])?e[t]=[]:e[t]={},e[t]):(Number.isInteger(+i[r+1])&&!Array.isArray(e[t])&&(e[t]=[]),e[t])}),e)},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!1;return String.prototype.replace.call(t,/\['(.+?)'\]/g,".$1").split(/[,[\].]+?/).filter(Boolean).reduce((function(e,t,r,i){return void 0===e?e:r===i.length-1?(delete e[t],n=!0,e[t]):e[t]}),e),n},R=function(e){var t=V(e);return Number.isInteger(+t[t.length-1])},I=function(){function e(){a(this,e)}return l(e,null,[{key:"empty",value:function(e){return 0===function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){return e[t]}))}(e).length}},{key:"get",value:function(e,t){return k(e,t)}},{key:"has",value:function(e,t){return x(e,t)}},{key:"set",value:function(t,n,r){if(void 0!==r)E("SETTING",n,r),w(t,n,r);else if(R(n)&&void 0!==e.get(t,n)){E("Special case SETTING",n,"to undefined"),w(t,n,void 0);var i=V(n);B(t,i=i.slice(0,i.length-1))}else R(n)||void 0===e.get(t,n)||(E("Special case REMOVING",n,"from object completley"),e.delete(t,n))}},{key:"delete",value:function(e,t){E("DELETE",t),R(t)?(E("ARRAY",t),this.pullOut(e,t)):O(e,t);var n=V(t);B(e,n=n.slice(0,n.length-1))}},{key:"pullOut",value:function(e,t){var n=V(t),r=n[n.length-1];n=n.slice(0,n.length-1),E("Pulling out:",n,"index",r);var i=k(e,n);E("Array",i),Array.isArray(i)&&function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";String.prototype.replace.call(n,/\['(.+?)'\]/g,".$1").split(/[,[\].]+?/).filter(Boolean).reduce((function(e,n,r,i){return void 0===e?e:r===i.length-1&&Array.isArray(e)?(t=e.splice(n,1),e[n]):e[n]}),e)}(i,r),B(e,n)}}]),e}();function B(e,t){if(0!==t.length){var n=k(e,t);(Array.isArray(n)?n.every((function(e){return null==e})):"{}"===JSON.stringify(n))&&O(e,t),B(e,t.slice(0,t.length-1))}}var P=r.createContext({register:function(){},deregister:function(){},setValue:function(){},setTouched:function(){},setError:function(){},update:function(){},getField:function(){},expectRemoval:function(){},getInitialValue:function(){},getSavedValue:function(){}}),T=r.createContext({}),j=r.createContext({getFullField:function(){},getValues:function(){},getOptions:function(){return{}},setInitialValue:function(){},getInitialValue:function(){},getDerrivedValue:function(){},getSavedValue:function(){},removeSavedState:function(){}}),D=r.createContext(),M=r.createContext(),G=r.createContext(),N=r.createContext(),L=r.createContext(),U=r.createContext();function $(){return(0,r.useContext)(j)}function _(e){var t=(0,r.useRef)(),n=(0,r.useRef)(!0),i=m((0,r.useState)(e),2),a=i[0],o=i[1];t.current=a;return(0,r.useEffect)((function(){return function(){n.current=!1}}),[]),[a,function(e){t.current=e,n.current&&o(e)},function(){return t.current}]}var q=function(e){return e.type&&e.type.name?e.type.name:e.displayName||e.name||"Component"},W=function(e){var t={};if(e.inner){if(0===e.inner.length)return void I.set(t,e.path,e.message);var n,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=b(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}(e.inner);try{for(r.s();!(n=r.n()).done;){var i=n.value;I.get(t,i.path)||I.set(t,i.path,i.message)}}catch(i){r.e(i)}finally{r.f()}}return t},z=function(e,t){try{e.validateSync(t,{abortEarly:!1})}catch(n){return W(n)}},J=function(e){if(e.inner){if(0===e.inner.length)return;return e.inner[0].message}},K=function(e,t){try{e.validateSync(t,{abortEarly:!1})}catch(n){return J(n)}},X=function(e,t){e(t);var n={};return e.errors&&e.errors.forEach((function(e){var t=e.message,r=e.dataPath,i=e.keyword,a=e.params,o=r;"required"===i&&(o="".concat(o,".").concat(a.missingProperty)),o=o.replace(".",""),I.set(n,o,t)})),n},Y=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},Z=function(e,t,n){var r=t["ui:control"],i=t["informed:props"],a=t["input:props"],o=t["ui:before"],l=t["ui:after"],u=t.oneOf,s=t.items,c=t.enum,f=t.title,h=t.minimum,v=t.maximum,p=t.minLength,g=t.maxLength,m=t.pattern,y=t.type,b=t.properties,F=Y();a&&a.id&&(F=a.id);var C={componentType:r,field:n?"".concat(n,".").concat(e):e,type:y,uiBefore:o,uiAfter:l,properties:"object"===y?b:void 0,items:"array"===y?s:void 0,props:d(d({label:f,id:F,min:h,max:v,minLength:p,maxLength:g,pattern:m},i),a)};if(u){var S=t.oneOf.map((function(e){var t=e["input:props"],n=void 0===t?{}:t;return d({value:e.const,label:e.title},n)}));C.props.options=S}if(c){var E=t.enum.map((function(e){return{value:e,label:e}}));C.props.options=E}if(s&&s.oneOf){var V=s.oneOf.map((function(e){var t=e["input:props"],n=void 0===t?{}:t;return d({value:e.const,label:e.title},n)}));C.props.options=V}return C},H=function(e,t,n){if(!e||t)return[];var r=e.properties,i=void 0===r?{}:r,a=e.allOf,o=e.propertyOrder,l=void 0===o?[]:o;if(Object.keys(i).length>0){var u=Object.keys(i).sort((function(e,t){var n=l.indexOf(e),r=l.indexOf(t);return(n>-1?n:l.length+1)-(r>-1?r:l.length+1)})).map((function(e){var t=i[e];return Z(e,t,n)}));return a&&u.push({componentType:"conditionals",allOf:a}),u}return[]},Q=function(e,t){if(!e)return{val:e,offset:0};var n="".concat(e),r=function(e,t){if("string"==typeof e)return e.split("").map((function(e){return"#"===e?/\d/:"*"===e?/[\w]/:e}));if("function"==typeof e)return e(t);if(Array.isArray(e))return e;throw new Error("Formatter must be string, array, or function")}(t,n),i=r.findIndex((function(e){return"string"!=typeof e})),a=r.length-y(r).reverse().findIndex((function(e){return"string"!=typeof e})),o=[],l=n.split(""),u=0,s=0,c=function(e,t){for(var n=0,r=-1,i=!0;i&&n<e.length;)e[n]==t[n]?r=n:i=!1,n+=1;return r}(r.slice(0,i),l.slice(0,i));c>-1&&(u=c+1,o=o.concat(r.slice(0,c+1)),s=c+1),c<0&&(o=o.concat(r.slice(0,i)),s=i);for(var d=s;d<r.length;d++){var f=r[d];if(u!=l.length){var h=l[u];if("function"==typeof f)o.push(f(h)),u+=1;else{var v="string"==typeof f?f===h:f.test(h);v&&"string"==typeof f?(o.push(f),u+=1):v||"string"!=typeof f?v&&"string"!=typeof f?(o.push(h),u+=1):v||"string"==typeof f||(u+=1,d-=1):u!=l.length&&o.push(f)}}else{if(!("string"==typeof f&&d>=a))break;o.push(f)}}return{value:o.join(""),offset:n?o.length-n.length:0}},ee="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect,te=function(e){var t=e.value,n=e.inputRef,r=e.maintainCursor,i=void 0===r||r,a=m(_(0),3),o=a[0],l=a[1],u=a[2],s=m(_(0),3),c=s[0],d=s[1],f=s[2];return ee((function(){if(null!=n.current&&u()){var e=u()+f();0!=f()&&i?n.current.setSelectionRange(e+1,e+1):i&&n.current.setSelectionRange(e,e)}}),[t]),{setCursorOffset:d,setCursor:l,cursor:o,getCursor:u,cursorOffset:c}},ne=function(e,t){var n=(0,r.useRef)(!0),i=n.current;(0,r.useEffect)((function(){if(!i)return e();n.current=!1}),t)},re=S("informed:useField\t"),ie=function(e,t,n,r,i){if(null!=e)return i?i(e):t?t(e):n&&!r?Q(e,n).value:e},ae=function(e,t,n,r){return t&&n?t(e):r?Q(e,r).value:e},oe=function(e,t,n){var r=n.required;return e||t?function(n,r){return t?K(t,n):e?e(n,r):void 0}:r?function(e){return de(e,r)}:void 0},le=function(e){var t=e.fieldType,n=e.setValue,r=e.onChange,i=e.multiple,a=e.ref,o=function(e){return n(e)};return"text"!==t&&"textArea"!==t&&"number"!==t||(o=function(e){return n(e.target.value,e)}),"select"===t&&(o=function(){var e=Array.from(a.current).filter((function(e){return e.selected})).map((function(e){return e.value}));n(i?e:e[0]||"")}),"checkbox"===t&&(o=function(e){n(e.target.checked),r&&r(e)}),function(e){o(e)}},ue=function(e){var t=e.setTouched,n=e.onBlur;return function(e){t(!0),n&&n(e)}},se=function(e){var t=e.fieldType,n=e.maskedValue,r=e.multiple,i=e.value;switch(t){case"text":case"number":return n||0===n?n:"";case"textArea":return n||"";case"select":return i||(r?[]:"");case"checkbox":return!!i;default:return i}},ce=function(e){switch(e){case"text":case"number":case"checkbox":return e;default:return}},de=function(e,t){if(t&&(null==e||""===e))return"string"==typeof t?t:"This field is required"};function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.field,i=e.validate,a=e.asyncValidate,o=e.validationSchema,l=e.mask,u=e.maskWithCursorOffset,s=e.format,c=e.parse,f=e.formatter,h=e.parser,p=e.initialValue,g=e.validateOnChange,b=e.validateOnBlur,F=e.validateOnMount,C=e.asyncValidateOnBlur,S=e.maskOnBlur,E=e.allowEmptyString,V=e.onValueChange,k=e.notify,A=e.keepState,x=e.maintainCursor,w=e.debug,O=e.shadow,R=e.step,B=e.fieldType,T=e.multiple,j=e.onChange,D=e.onBlur,M=e.formController,G=e.relevant,N=e.required,L=e.keepStateIfRelevant,q=e.initialize,W=e.formatterDependencies,z=void 0===W?[]:W,J=v(e,["field","validate","asyncValidate","validationSchema","mask","maskWithCursorOffset","format","parse","formatter","parser","initialValue","validateOnChange","validateOnBlur","validateOnMount","asyncValidateOnBlur","maskOnBlur","allowEmptyString","onValueChange","notify","keepState","maintainCursor","debug","shadow","step","fieldType","multiple","onChange","onBlur","formController","relevant","required","keepStateIfRelevant","initialize","formatterDependencies"]),K=(0,r.useState)(Y()),X=m(K,1),Z=X[0],H=(0,r.useContext)(P),de=(0,r.useContext)(U),fe=de||L,he=$(),ve=(0,r.useRef)(),pe=(0,r.useRef)(!0),ge=(0,r.useRef)(),me=(0,r.useRef)(!1),ye=function(){return!me.current},be=function(){return me.current};M&&(H=M.updater,he=M.getFormApi());var Fe,Ce,Se=oe(i,o,{required:N}),Ee=(0,r.useState)((function(){return H.getInitialValue(n)})),Ve=m(Ee,1),ke=Ve[0],Ae=H.getSavedValue(n);(A||fe)&&Ae?(re("Setting field ".concat(St,"'s kept state"),Ae),Fe=Ae.value,Ce=Ae.touched,he.removeSavedState(St)):Fe=null!=p?p:ke;var xe=_(ie(Fe,l,f,h,q)),we=m(xe,3),Oe=we[0],Re=we[1],Ie=we[2],Be=_(F?Se(Oe):void 0),Pe=m(Be,3),Te=Pe[0],je=Pe[1],De=Pe[2],Me=_(Ce),Ge=m(Me,3),Ne=Ge[0],Le=Ge[1],Ue=Ge[2],$e=(0,r.useState)((function(){return ae(Oe,s,c,f)})),_e=m($e,2),qe=_e[0],We=_e[1],ze=(0,r.useRef)();ze.current=qe;var Je=(0,r.useRef)(p),Ke=(0,r.useRef)(n),Xe=(0,r.useRef)();Je.current=p,Ke.current=n;var Ye=(0,r.useRef)(null),Ze=r.useMemo((function(){return t||Ye}),[]),He=te({value:Oe,inputRef:Ze,maintainCursor:!!x}),Qe=He.getCursor,et=He.setCursor,tt=He.setCursorOffset,nt=function(){return!0},rt=function(e){var t=G||nt,n=he.getFullField(Ke.current)||Ke.current,r={path:n,parentPath:n.replace(/(.*)[.[].*/,"$1"),get:function(e,t){return I.get(e,t)}};return de&&de.relevant?t(e,r)&&de.relevant(e,r):t(e,r)},it=_(rt(he.getValues())),at=m(it,3),ot=at[0],lt=at[1],ut=at[2],st=function(e){return!de||!de.relevant||de.relevant(e)},ct=function(){var e=rt(he.getValues());return e!=ut()&&lt(e),e};(0,r.useEffect)((function(){ot||A||ve.current.reset()}),[ot]);var dt=function(){return O?he.getDerrivedValue(n):Ie()},ft=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.preventUpdate;R&&he.getStep()<R?(re("Setting ".concat(n,"'s error to undefined as we are not at that step")),je(void 0),H.setError(Z,void 0,!r)):(re("Setting ".concat(n,"'s error to ").concat(e)),je(e),H.setError(Z,e,!r))},ht=function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t;me.current=!0,re("Setting ".concat(n," to ").concat(a)),q&&(a=q(a));var o=he.getOptions(),d=a;if(""!==a||E||i.allowEmptyString||o.allowEmptyStrings||(a=void 0),"number"!==e.type&&"number"!==B||void 0===a||(a=+a),r&&r.target&&r.target.selectionStart&&et(r.target.selectionStart),l&&!S&&(d=l(a,Qe()),a=l(a,Qe())),u&&!S){var v=u(a,Qe());d=v.value,a=v.value,tt(v.offset)}if(s&&c&&(a=c(a),d=s(a)),f){var p=Q(a,f);tt(p.offset),a=d=p.value}h&&(a=null!=a?h(a):a),Se&&g&&!i.initial&&(re("Validating after change ".concat(n," ").concat(a)),ft(Se(a,he.getValues()))),Re(a),We(d),V&&V(a),H.setValue(Z,a,!i.preventUpdate)};ne((function(){ve.current.setValue(ze.current)}),y(z));var vt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.preventUpdate;if(re("Field ".concat(n," has been touched")),Se&&b&&!t&&e&&(re("Validating after blur ".concat(n," ").concat(dt())),ft(Se(dt(),he.getValues()))),a&&C&&!t&&e&&(re("Validating async after blur ".concat(n," ").concat(dt())),a(dt(),he.getValues())),l&&S){var o=l(dt());Re(o),We(o),V&&V(o),H.setValue(Z,o,!i)}if(u&&S){var s=u(dt());tt(s.offset),Re(s.value),We(s.value),V&&V(s.value),H.setValue(Z,s.value,!i)}Le(e),H.setTouched(Z,e,!i)},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.preventUpdate,n=ie(Je.current||H.getInitialValue(Ke.current),l,f,h,q);ht(n,null,{initial:!0,preventUpdate:t}),ft(F?Se(n):void 0,{preventUpdate:t}),vt(void 0,!0,{preventUpdate:t}),me.current=!1},gt=function(e){Se&&(re("Field validating ".concat(n," ").concat(dt())),ft(Se(dt(),e||he.getValues())))},mt=function(e){a&&(re("Field async validating ".concat(n," ").concat(dt())),a(dt(),e||he.getValues()))},yt={setValue:ht,setTouched:vt,setError:ft,reset:pt,validate:gt,asyncValidate:mt,getValue:dt,getTouched:Ue,getError:De,getIsRelevant:ut,getDirty:be,getPristine:ye,getFieldState:function(){return{value:dt(),touched:Ue(),dirty:be(),pristine:ye()}},relevant:rt,multistepRelevant:st,checkRelevant:ct};ve.current=yt;var bt={value:Oe,error:Te,touched:Ne,maskedValue:qe,isRelevant:ot,dirty:me.current,pristine:!me.current};O&&(bt={error:Te,touched:Ne}),re("Render",he.getFullField(n),bt),ee((function(){var e=he.getFullField(Ke.current);return re("Register",Z,Ke.current),ge.current={field:e,fieldId:Z,fieldApi:yt,fieldState:bt,notify:k,keepState:A,inMultistep:fe,shadow:O},H.register(Z,ge.current),function(){var e=he.getFullField(Ke.current);re("Deregister",Z,e),H.deregister(Z)}}),[]),(0,r.useEffect)((function(){var e=he.getFullField(n);return pe.current?pe.current=!1:(re("Update",n,fe),ge.current.field=e,H.update(Z,ge.current,Xe.current)),function(){Xe.current=e}}),[n]),ee((function(){w&&Ze&&(Ze.current.style.border="5px solid orange",setTimeout((function(){Ze.current.style.borderWidth="2px",Ze.current.style.borderStyle="inset",Ze.current.style.borderColor="initial",Ze.current.style.borderImage="initial"}),500))}));var Ft=[].concat(y(Object.values(bt)),y(Object.values(e)),y(Object.values(J))),Ct=function(e){return(0,r.useMemo)((function(){return ot?e:null}),y(Ft))},St=n,Et=le({fieldType:B,setValue:ht,onChange:j,multiple:T,ref:Ze}),Vt=ue({setTouched:vt,onBlur:D}),kt=se({fieldType:B,maskedValue:qe,multiple:T,value:Oe}),At=ce(B);return{fieldState:bt,fieldApi:yt,render:Ct,ref:Ze,userProps:d(d({},J),{},{multiple:T,onChange:j,onBlur:D,id:J.id||Z}),informed:d({name:St,multiple:T,onChange:Et,onBlur:Vt,value:kt,ref:Ze,type:At,id:J.id||Z},J)}}var he,ve=function(e){var t=r.forwardRef((function(t,n){var i=fe(t,n),a=i.fieldState,o=i.fieldApi,l=i.render,u=i.ref,c=i.userProps;return l(r.createElement(e,s({fieldApi:o,fieldState:a,field:t.field,forwardedRef:u,debug:t.debug,type:t.type},c)))}));return t.displayName="asField(".concat(q(e),")"),t},pe=S("informed:Text\t"),ge=ve((function(e){var t=e.fieldApi,n=e.fieldState,i=v(e,["fieldApi","fieldState"]),a=n.maskedValue,o=t.setValue,l=t.setTouched,u=i.onChange,c=i.onBlur,d=i.field,f=(i.initialValue,i.forwardedRef),h=i.debug,p=i.label,g=(i.title,i.id),m=v(i,["onChange","onBlur","field","initialValue","forwardedRef","debug","label","title","id"]);return pe("Render",d),ee((function(){h&&f&&(f.current.style.background="red",setTimeout((function(){f.current.style.background="white"}),500))})),r.createElement(r.Fragment,null,p?r.createElement("label",{htmlFor:g}," ",p," "):null,r.createElement("input",s({},m,{id:g,name:d,ref:f,value:a||0===a?a:"",onChange:function(e){o(e.target.value,e),u&&u(e)},onBlur:function(e){l(!0),c&&c(e)}})))})),me=ve((function(e){var t=e.fieldApi,n=e.fieldState,i=v(e,["fieldApi","fieldState"]),a=n.maskedValue,o=t.setValue,l=t.setTouched,u=i.onChange,c=i.onBlur,d=i.field,f=(i.initialValue,i.forwardedRef),h=i.debug,p=i.label,g=i.id,m=v(i,["onChange","onBlur","field","initialValue","forwardedRef","debug","label","id"]);return ee((function(){h&&f&&(f.current.style.background="red",setTimeout((function(){f.current.style.background="white"}),500))})),r.createElement(r.Fragment,null,p?r.createElement("label",{htmlFor:g}," ",p," "):null,r.createElement("textarea",s({},m,{id:g,name:d,ref:f,value:a||"",onChange:function(e){o(e.target.value,e),u&&u(e)},onBlur:function(e){l(!0),c&&c(e)}})))})),ye=S("informed:Select\t"),be=ve((function(e){var t=e.fieldApi,n=e.fieldState,i=v(e,["fieldApi","fieldState"]),a=n.value,o=t.setTouched,l=i.onChange,u=i.onBlur,c=i.field,d=(i.initialValue,i.options),f=i.children,h=i.forwardedRef,p=i.debug,g=i.multiple,m=i.label,y=i.id,b=v(i,["onChange","onBlur","field","initialValue","options","children","forwardedRef","debug","multiple","label","id"]),F=(0,r.useRef)();return ee((function(){p&&h&&(h.current.style.background="red",setTimeout((function(){h.current.style.background="white"}),500))})),ye("Render",c,a),r.createElement(r.Fragment,null,m?r.createElement("label",{htmlFor:y}," ",m," "):null,r.createElement("select",s({},b,{id:y,multiple:g,name:c,ref:h||F,value:a||(g?[]:""),onChange:function(e){var n=Array.from((h||F).current).filter((function(e){return e.selected})).map((function(e){return e.value}));t.setValue(g?n:n[0]||""),l&&e&&l(e)},onBlur:function(e){o(!0),u&&u(e)}}),d?d.map((function(e){return r.createElement("option",{key:e.value,value:e.value,disabled:e.disabled},e.label)})):f))})),Fe=ve((function(e){var t=e.fieldApi,n=e.fieldState,i=v(e,["fieldApi","fieldState"]),a=n.value,o=t.setValue,l=t.setTouched,u=i.onChange,c=i.onBlur,d=i.field,f=(i.initialValue,i.debug,i.forwardedRef),h=i.id,p=i.label,g=v(i,["onChange","onBlur","field","initialValue","debug","forwardedRef","id","label"]);return r.createElement(r.Fragment,null,p?r.createElement("label",{htmlFor:h}," ",p," "):null,r.createElement("input",s({},g,{id:h,name:d,ref:f,checked:!!a,onChange:function(e){o(e.target.checked),u&&u(e)},onBlur:function(e){l(!0),c&&c(e)},type:"checkbox"})))})),Ce=(he=function(e){var t=e.radioGroupApi,n=e.radioGroupState,i=v(e,["radioGroupApi","radioGroupState"]),a=n.value,o=t.setValue,l=t.setTouched,u=t.onChange,c=t.onBlur,d=i.value,f=i.onChange,h=i.onBlur,p=i.field,g=(i.initialValue,i.forwardedRef),m=v(i,["value","onChange","onBlur","field","initialValue","forwardedRef"]);return r.createElement("input",s({},m,{name:p,ref:g,value:d,checked:a===d,onChange:function(e){e.target.checked&&(o(d),f&&f(e),u&&u(e))},onBlur:function(e){l(!0),h&&h(e),c&&c(e)},type:"radio"}))},r.forwardRef((function(e,t){return r.createElement(D.Consumer,null,(function(n){var i=n.radioGroupApi,a=n.radioGroupState;return r.createElement(he,s({radioGroupApi:i,radioGroupState:a,ref:t},e))}))}))),Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,e);var t=g(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.children;return r.createElement(D.Provider,{value:this.groupContext},t?t.map((function(e){return r.createElement("label",{key:e.value},e.label," ",r.createElement(Ce,{value:e.value}))})):n)}},{key:"groupContext",get:function(){return{radioGroupApi:d(d({},this.props.fieldApi),{},{onChange:this.props.onChange,onBlur:this.props.onBlur}),radioGroupState:this.props.fieldState}}}]),n}(r.Component),Ee=ve(Se);var Ve=S("informed:useArrayField\t"),ke=function(e){var t=e.field,n=e.initialValue,i=e.validate,a=e.arrayFieldApiRef,o=v(e,["field","initialValue","validate","arrayFieldApiRef"]),l=$(),u=m((0,r.useState)(new Map),1)[0],s=(0,r.useContext)(P),c=l.getFullField(t),f=s.getInitialValue(t)||n||[],h=m(_(l.getSavedValue(c)&&l.getSavedValue(c).value||f),3),p=h[0],g=h[1],b=h[2],F=m(_(p?p.map((function(){return Y()})):[]),3),C=F[0],S=F[1],E=F[2],V=(0,r.useMemo)((function(){return function(e,t){var n=null==E()?0:E().length;return i?i(e,n,t):void 0}})),k=fe(d({field:t,validate:i?V:void 0,shadow:!0},o)).fieldApi;ee((function(){var e=function(e){e!==c&&(Ve("".concat(c," changed")),RegExp("".concat(c,"\\[[0-9]+\\]")).test(e)&&k.validate())};return l.emitter.on("value",e),function(){l.emitter.removeListener("value",e)}}),[t]);var A=function(e,n){Ve("Swapping","".concat(t,"[").concat(e,"] and ").concat(t,"[").concat(n,"]"));var r=y(C);C[e]&&C[n]?(r[e]=C[n],r[n]=C[e]):console.warn("Attempted to swap ".concat(e," with ").concat(n," but one of them does not exist :(")),S(r)},x=function(){C.push(Y()),S(y(C))},w=function(e){C.push(Y()),S(y(C));var t=y(b());t[C.length-1]=e,g(t)},O=C.map((function(e,n){var r={remove:function(){return function(e){Ve("EXPECTING REMOVAL OF","".concat(t,"[").concat(e,"] and ").concat(t,"[").concat(C.length-1,"]")),s.expectRemoval("".concat(t,"[").concat(e,"]")),s.expectRemoval("".concat(t,"[").concat(C.length-1,"]"));var n=C.slice(0,e).concat(C.slice(e+1,C.length));S(n);var r=b(),i=r.slice(0,e).concat(r.slice(e+1,r.length));g(i)}(n)}},i={initialValue:p&&p[n],key:e,field:"".concat(t,"[").concat(n,"]"),index:n};return d(d({arrayFieldItemApi:r,arrayFieldItemState:i},r),i)})),R={add:x,swap:A,addWithInitialValue:w,reset:function(){var e=s.getInitialValue(t)||n||[];g(e);var r=e?e.map((function(){return Y()})):[];S(r)}};a&&(a.current=R);var B={fields:O,field:t},T=d(d({},s),{},{register:function(e,t){u.set(e,t);for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];s.register.apply(s,[e,t].concat(r))},deregister:function(e){u.delete(e);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];s.deregister.apply(s,[e].concat(n))},getInitialValue:function(e){if(RegExp("".concat(c,"\\[[0-9]+\\]")).test(e)){var n=e.replace(t,""),r=I.get(b(),n);return Ve("Resetting ".concat(n," to ").concat(r)),r}return s.getInitialValue(e)}});return{render:function(e){return r.createElement(P.Provider,{value:T},r.createElement(G.Provider,{value:R},r.createElement(M.Provider,{value:B},e)))},add:x,swap:A,addWithInitialValue:w,fields:O,arrayFieldState:B,arrayFieldApi:R,field:t}};function Ae(e){var t=$();return(0,r.useMemo)((function(){return function(e,t){return d(d({},t),{},{getValue:function(n){return t.getValue("".concat(e,".").concat(n))},getTouched:function(n){return t.getTouched("".concat(e,".").concat(n))},getError:function(n){return t.getError("".concat(e,".").concat(n))},setValue:function(n,r){return t.setValue("".concat(e,".").concat(n),r)},setTouched:function(n,r){return t.setTouched("".concat(e,".").concat(n),r)},setError:function(n,r){return t.setError("".concat(e,".").concat(n),r)},getInitialValue:function(n){return t.getInitialValue("".concat(e,".").concat(n))},getSavedValue:function(n){return t.getSavedValue("".concat(e,".").concat(n))},getFullField:function(n){return"".concat(t.getFullField(e),".").concat(n)}})}(e,t)}),[e])}function xe(){return(0,r.useContext)(T)}var we=function(e){var t=e.when,n=e.children;return t(xe())?n:null},Oe=function(e){var t=e.relevant,n=e.field,i=v(e,["relevant","field"]),a=$();if(t){var o=a.getFullField(n),l={path:o,parentPath:o.replace(/(.*)[.[].*/,"$1"),get:function(e,t){return I.get(e,t)}};return r.createElement(we,{when:function(e){var n=e.values;return t(n,l)}},r.createElement(Re,s({field:n},i)))}return r.createElement(Re,s({field:n},i))},Re=function(e){var t=e.children,n=v(e,["children"]),r=ke(n),i=r.render,a=r.arrayFieldState,o=r.arrayFieldApi,l=r.field;return i("function"==typeof t?t(d(d({field:l,arrayFieldApi:o,arrayFieldState:a},o),a)):t)},Ie=function(e){var t=e.arrayFieldItemState,n=e.arrayFieldItemApi,i=e.children,a=(0,r.useContext)(P),o=$(),l=m((0,r.useState)(0),2),u=(l[0],l[1]),s=m((0,r.useState)(new Map),1)[0],c=t.field,f=Ae(c);(0,r.useEffect)((function(){var e=function(e){e.slice(0,-1!=e.lastIndexOf("[")?e.lastIndexOf("]")+1:e.length)===c&&u(Math.random())};return o.emitter.on("value",e),function(){o.emitter.removeListener("value",e)}}),[c]);var h,v,p,g,y=(h=o.getState(),v=h.values,p=h.errors,g=h.touched,{values:I.get(v,c),errors:I.get(p,c),touched:I.get(g,c)}),b=d(d({},a),{},{register:function(e,t,n){s.set(e,t),a.register(e,t,n)},deregister:function(e){s.delete(e);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.deregister.apply(a,[e].concat(n))}}),F=d(d(d({},n),f),{},{reset:function(){s.forEach((function(e){e.fieldApi.reset()}))}}),C=d(d({},t),y);return"function"==typeof i?r.createElement(P.Provider,{value:b},r.createElement(N.Provider,{value:F},r.createElement(L.Provider,{value:C},i(d(d({arrayFieldItemApi:F,arrayFieldItemState:C},F),C))))):r.createElement(P.Provider,{value:b},r.createElement(N.Provider,{value:F},r.createElement(L.Provider,{value:C},i)))};Oe.Items=function(e){var t=e.children;return(0,r.useContext)(M).fields.map((function(e){var n=e.arrayFieldItemState,i=e.arrayFieldItemApi,a=n.key;return r.createElement(Ie,{key:a,arrayFieldItemApi:i,arrayFieldItemState:n},t)}))};var Be=function(e){var t=e.components,n=(0,r.useContext)(P).fieldMap;return t?t.map((function(e,t){var i=e["ui:control"],a=n[i];return r.createElement(a,{key:"ui-comp-".concat(t)})})):null},Pe=S("informed:FormFields\t"),Te=function e(t){var n=t.schema,i=t.prefix,a=t.onlyValidateSchema,o=(0,r.useContext)(P).fieldMap;return(0,r.useMemo)((function(){return H(n,a,i).map((function(t,n){var i=t.field,a=t.props,l=t.type,u=t.properties,c=t.items,d=t.componentType,f=t.uiBefore,h=t.uiAfter,v=t.allOf,p=o[d];return Pe("Rendering Field",i,t),!p&&"object"===l&&u?r.createElement(e,{schema:t,prefix:i,key:"ScheamField-".concat(n)}):!p&&"array"===l&&c?r.createElement(je,s({key:"ScheamField-".concat(n),field:i,items:c,uiBefore:f,uiAfter:h},a)):p&&"array"===d&&c&&"array"===l?r.createElement(p,s({key:"ScheamField-".concat(n),field:i,items:c,uiBefore:f,uiAfter:h},a)):"conditionals"===d?v.map((function(t){var i=t.then,a=t.if.properties;return r.createElement(we,{key:"ScheamField-".concat(n),when:function(e){var t=e.values;return Object.keys(a).every((function(e){var n=a[e];return t[e]===n.const}))}},r.createElement(e,{schema:i}))})):p?r.createElement(p,s({key:"ScheamField-".concat(n),field:i},a)):null}))}),[n,i])},je=function(e){var t=e.field,n=e.items,i=e.uiBefore,a=e.uiAfter,o=v(e,["field","items","uiBefore","uiAfter"]);return r.createElement(Oe,s({field:t},o),r.createElement(Be,{components:i}),r.createElement(Oe.Items,null,(function(e){var t=e.field;return r.createElement(r.Fragment,null,r.createElement(Be,{components:n["ui:before"]}),r.createElement(Te,{schema:n,prefix:t}),r.createElement(Be,{components:n["ui:after"]}))})),r.createElement(Be,{components:a}))},De={select:be,input:ge,textarea:me,checkbox:Fe,radio:Ee,add:function(){var e=(0,r.useContext)(G).add;return r.createElement("button",{onClick:function(){e()},type:"button"},"Add")},remove:function(){var e=(0,r.useContext)(N).remove;return r.createElement("button",{onClick:function(){e()},type:"button"},"Remove")},array:je},Me=S("informed:Controller\t"),Ge=function(){},Ne=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.options=n,this.subscriptions=new Map;var r=n.ajv,i=n.schema,o=n.fieldMap;this.ajv=r?new r({allErrors:!0}):null,this.ajvValidate=r?this.ajv.compile(i):null,this.fieldMap=o||De,this.fieldsById=new Map,this.fieldsByName={get:function(e){var n;return t.fieldsById.forEach((function(t){t&&t.field===e&&(n=t)})),n}},this.onScreen={},this.expectedRemovals={},this.pulledOut={},this.savedValues={},this.state={pristine:!0,dirty:!1,invalid:!1,submits:0,step:0,validating:0,submitting:!1,values:{},errors:{},touched:{}},this.dummyField={fieldApi:{setValue:Ge,setTouched:Ge,setError:Ge,reset:Ge,validate:Ge,getValue:Ge,getTouched:Ge,getError:Ge,getFieldState:Ge,checkRelevant:Ge,getPristine:Ge,getDirty:Ge}},this.deregister=this.deregister.bind(this),this.register=this.register.bind(this),this.getValue=this.getValue.bind(this),this.getTouched=this.getTouched.bind(this),this.getError=this.getError.bind(this),this.getErrors=this.getErrors.bind(this),this.setValue=this.setValue.bind(this),this.getValues=this.getValues.bind(this),this.getStep=this.getStep.bind(this),this.setStep=this.setStep.bind(this),this.back=this.back.bind(this),this.next=this.next.bind(this),this.setCurrent=this.setCurrent.bind(this),this.setTouched=this.setTouched.bind(this),this.setError=this.setError.bind(this),this.setFormError=this.setFormError.bind(this),this.submitForm=this.submitForm.bind(this),this.reset=this.reset.bind(this),this.update=this.update.bind(this),this.validate=this.validate.bind(this),this.screenValid=this.screenValid.bind(this),this.keyDown=this.keyDown.bind(this),this.getField=this.getField.bind(this),this.getInitialValue=this.getInitialValue.bind(this),this.setInitialValue=this.setInitialValue.bind(this),this.getOptions=this.getOptions.bind(this),this.getFormState=this.getFormState.bind(this),this.expectRemoval=this.expectRemoval.bind(this),this.getSavedValue=this.getSavedValue.bind(this),this.removeSavedState=this.removeSavedState.bind(this),this.getDerrivedValue=this.getDerrivedValue.bind(this),this.setValues=this.setValues.bind(this),this.resetField=this.resetField.bind(this),this.fieldExists=this.fieldExists.bind(this),this.validateField=this.validateField.bind(this),this.notify=this.notify.bind(this),this.validating=this.validating.bind(this),this.validated=this.validated.bind(this),this.getDirty=this.getDirty.bind(this),this.getPristine=this.getPristine.bind(this),this.on=this.on.bind(this),this.emit=this.emit.bind(this),this.removeListener=this.removeListener.bind(this),this.updater={register:this.register,deregister:this.deregister,getField:this.getField,update:this.update,fieldMap:this.fieldMap,setValue:function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.fieldsById.get(e);i.shadow||I.set(t.state.values,i.field,i.fieldApi.getValue()),i.fieldApi.relevant(t.state.values)||I.delete(t.state.values,i.field),t.fieldsById.forEach((function(e){var n=e.fieldApi.checkRelevant();e.fieldApi.multistepRelevant(t.state.values)&&(n||e.keepState)||(I.delete(t.state.values,e.field),I.delete(t.state.touched,e.field),I.delete(t.state.errors,e.field))})),r&&(t.emit("change"),t.emit("field",i.field),t.emit("value",i.field,n))},setTouched:function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.fieldsById.get(e);!i.shadow&&i.fieldApi.getIsRelevant()&&I.set(t.state.touched,i.field,i.fieldApi.getTouched()),i.shadow&&null!=i.fieldApi.getError()&&i.fieldApi.relevant(t.state.values)&&I.set(t.state.touched,i.field,i.fieldApi.getTouched()),r&&(t.emit("change"),t.emit("field",i.field))},setError:function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.fieldsById.get(e);!i.shadow&&i.fieldApi.getIsRelevant()&&I.set(t.state.errors,i.field,i.fieldApi.getError());var a=I.get(t.state.errors,i.field);(i.shadow&&null!=i.fieldApi.getError()&&i.fieldApi.relevant(t.state.values)||i.shadow&&void 0===i.fieldApi.getError()&&i.fieldApi.relevant(t.state.values)&&"string"==typeof a)&&I.set(t.state.errors,i.field,i.fieldApi.getError()),r&&(t.emit("change"),t.emit("field",i.field))},expectRemoval:this.expectRemoval,getInitialValue:this.getInitialValue,getSavedValue:this.getSavedValue},this.formApi={setValue:this.setValue,setTouched:this.setTouched,setError:this.setError,setFormError:this.setFormError,setValues:this.setValues,setInitialValue:this.setInitialValue,getValue:this.getValue,getTouched:this.getTouched,getError:this.getError,reset:this.reset,submitForm:this.submitForm,getState:this.getFormState,getValues:this.getValues,getFullField:this.getFullField,fieldExists:this.fieldExists,getInitialValue:this.getInitialValue,validate:this.validate,validateField:this.validateField,screenValid:this.screenValid,resetField:this.resetField,getOptions:this.getOptions,emitter:this,getSavedValue:this.getSavedValue,removeSavedState:this.removeSavedState,getDerrivedValue:this.getDerrivedValue,getStep:this.getStep,setStep:this.setStep,next:this.next,back:this.back,setCurrent:this.setCurrent,validated:this.validated,validating:this.validating,getDirty:this.getDirty,getPristine:this.getPristine,getField:this.getField},this.on("value",(function(e){delete t.state.error,t.notify(e)}))}return l(e,[{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=this.subscriptions.get(e);i&&i.forEach((function(e){return e.apply(void 0,n)}))}},{key:"on",value:function(e,t){this.subscriptions.get(e)||this.subscriptions.set(e,new Set),this.subscriptions.get(e).add(t)}},{key:"removeListener",value:function(e,t){this.subscriptions.get(e).delete(t)}},{key:"setOptions",value:function(e){this.options=e}},{key:"setValue",value:function(e,t,n){this.getField(e).fieldApi.setValue(t,null,d({allowEmptyString:this.options.allowEmptyStrings},n))}},{key:"setTouched",value:function(e,t){this.getField(e).fieldApi.setTouched(t)}},{key:"setError",value:function(e,t){this.getField(e).fieldApi.setError(t)}},{key:"setFormError",value:function(e){this.state.error=e,this.emit("change")}},{key:"validating",value:function(){this.state.validating=this.state.validating+1,this.emit("change")}},{key:"validated",value:function(e,t){this.state.validating=this.state.validating-1,this.getError(e)||this.setError(e,t),this.state.validating>0||this.state.submitting&&(this.valid()?(Me("Submit",this.state),this.emit("submit")):(Me("Submit",this.state),this.emit("failure")),this.state.submitting=!1),this.emit("change")}},{key:"setStep",value:function(e){this.state.step=e,this.emit("change")}},{key:"setCurrent",value:function(e){this.state.Current=e,this.emit("change")}},{key:"back",value:function(e){this.state.step=this.state.step-1,this.state.Current=e,this.emit("change")}},{key:"next",value:function(e){this.validate(),this.screenValid()&&(this.state.step=this.state.step+1,this.state.Current=e),this.emit("change")}},{key:"setInitialValue",value:function(e,t){I.set(this.options.initialValues,e,t)}},{key:"getFormState",value:function(){return Me("Returning form state"),d(d({},this.state),{},{pristine:this.pristine(),dirty:this.dirty(),invalid:this.invalid()})}},{key:"getFormApi",value:function(){return this.formApi}},{key:"getDerrivedValue",value:function(e){var t=this.getValues();return I.get(t,e)}},{key:"getValue",value:function(e){var t=this.getField(e).fieldApi.getValue();return Me("Getting value for",e,t),t}},{key:"getTouched",value:function(e){var t=this.getField(e).fieldApi.getTouched();return Me("Getting touched for",e,t),t}},{key:"getError",value:function(e){var t=this.getField(e).fieldApi.getError();return Me("Getting error for",e,t),t}},{key:"getDirty",value:function(e){var t=this.getField(e).fieldApi.getDirty();return Me("Getting dirty for",e,t),t}},{key:"getPristine",value:function(e){var t=this.getField(e).fieldApi.getPristine();return Me("Getting pristine for",e,t),t}},{key:"getValues",value:function(){return Me("Gettings values"),this.state.values}},{key:"getAllTouched",value:function(){return Me("Gettings touched"),this.state.touched}},{key:"getErrors",value:function(){return Me("Gettings errors"),this.state.errors}},{key:"getOptions",value:function(){return this.options}},{key:"getStep",value:function(){return this.state.step}},{key:"getSavedValue",value:function(e){var t=this.fieldsByName.get(e);return t&&t.shadow?I.get(this.savedValues,"shadow-".concat(e)):I.get(this.savedValues,e)}},{key:"removeSavedState",value:function(e){var t=this.fieldsByName.get(e);return t&&t.shadow?I.delete(this.savedValues,"shadow-".concat(e)):I.delete(this.savedValues,e)}},{key:"getFullField",value:function(e){return e}},{key:"getInitialValue",value:function(e){return I.get(this.options.initialValues,e)}},{key:"getField",value:function(e){Me("Getting Field",e);var t=this.fieldsByName.get(e);return t||(console.warn("Attempting to get field ".concat(e," but it does not exist")),this.dummyField)}},{key:"notify",value:function(e){var t=this,n=this.getField(e);n&&n.notify&&n.notify.forEach((function(n){var r=".".concat(e),i="".concat(r.replace(/(.*)[.[].*/,"$1"),".").concat(n).slice(1),a=t.getField(i);a&&(Me("Notifying",a.field),a.fieldApi.validate(),a.fieldApi.checkRelevant())}))}},{key:"validateField",value:function(e){this.getField(e).fieldApi.validate()}},{key:"resetField",value:function(e){this.getField(e).fieldApi.reset()}},{key:"fieldExists",value:function(e){return null!=this.fieldsByName.get(e)}},{key:"valid",value:function(){var e=this.getErrors();return!(!I.empty(e)||this.state.error)}},{key:"screenValid",value:function(){return!Object.entries(this.onScreen).some((function(e){return m(e,2)[1].fieldApi.getError()}))}},{key:"invalid",value:function(){var e=this.getErrors();return!(I.empty(e)&&!this.state.error)}},{key:"pristine",value:function(){var e=!0;return this.fieldsById.forEach((function(t){t.fieldApi.getPristine()||(e=!1)})),e}},{key:"dirty",value:function(){return!this.pristine()}},{key:"reset",value:function(){Me("Resetting"),this.fieldsById.forEach((function(e){e.fieldApi.reset({preventUpdate:!0})})),this.emit("reset"),this.emit("change")}},{key:"setValues",value:function(e){Me("Setting values"),this.fieldsById.forEach((function(t){var n=I.get(e,t.field);void 0!==n&&t.fieldApi.setValue(n,null,{preventUpdate:!0})})),this.emit("change")}},{key:"validate",value:function(){var e=this;Me("Validating all fields");var t=this.getValues();if(this.options.validationSchema){var n=z(this.options.validationSchema,t);this.fieldsById.forEach((function(t){if(I.has(n,t.field)){var r=I.get(n,t.field);e.setError(t.field,r)}else e.setError(t.field,void 0)}))}if(this.options.schema&&this.options.ajv){var r=X(this.ajvValidate,t);this.fieldsById.forEach((function(t){if(I.has(r,t.field)){var n=I.get(r,t.field);e.setError(t.field,n)}else e.setError(t.field,void 0)}))}if(this.fieldsById.forEach((function(e){e.fieldApi.validate(t),e.fieldApi.setTouched(!0,!0)})),this.options.validate){var i=this.options.validate(t);this.setFormError(i)}if(this.options.validateFields){var a=this.options.validateFields(t);this.fieldsById.forEach((function(t){if(I.has(a,t.field)){var n=I.get(a,t.field);e.setError(t.field,n)}}))}}},{key:"asyncValidate",value:function(){Me("Async Validating all fields");var e=this.getValues();this.fieldsById.forEach((function(t){t.fieldApi.asyncValidate(e)}))}},{key:"keyDown",value:function(e){if(13==e.keyCode&&this.options.preventEnter)return e.preventDefault(e),!1}},{key:"submitForm",value:function(e){this.state.submits=this.state.submits+1,this.state.submitting=!0,!this.options.dontPreventDefault&&e&&e.preventDefault(e),this.validate(),this.emit("change"),this.asyncValidate(),this.state.validating>0||(this.valid()?(Me("Submit",this.state),this.emit("submit")):(Me("Submit",this.state),this.emit("failure")),this.state.submitting=!1,this.emit("change"))}},{key:"mount",value:function(){var e=this;this.fieldsById.forEach((function(t){e.emit("field",t.field)}))}},{key:"register",value:function(e,t,n){var r=t.field,i=t.state;Me("Register ID:",e,"Name:",r,i,"Initial",n);var a,o=r.slice(0,-1!=r.lastIndexOf("[")?r.lastIndexOf("]")+1:r.length);this.fieldsById.forEach((function(e,t){e&&e.field===r&&(a=t)})),a&&(t.keepState||t.inMultistep)?(Me("Already Registered",r),this.fieldsById.delete(a)):!a||t.keepState&&t.inMultistep||console.warn("Check to make sure you have not registered two fields with the fieldName",r),Me("Fields Registered",this.fieldsById.size),this.onScreen[e]=t,this.fieldsById.set(e,t),Me("clearing expected removal",o),delete this.expectedRemovals[o],delete this.pulledOut[o],t.shadow||(this.updater.setValue(e,t.fieldApi.getValue(),!1),this.updater.setError(e,t.fieldApi.getError(),!1),this.updater.setTouched(e,t.fieldApi.getTouched(),!1),n||this.emit("change"),this.emit("field",r))}},{key:"deregister",value:function(e){var t=this.fieldsById.get(e),n=t.field;Me("Deregister",e,n),delete this.onScreen[e];var r=function(e,t){var n=Object.keys(t).find((function(t){return e.includes(t)}));if(n)return e.slice(0,n.length)===n}(n,this.expectedRemovals),i=n.slice(0,-1!=n.lastIndexOf("[")?n.lastIndexOf("]")+1:n.length);!t.keepState&&!t.inMultistep||r||(Me("Saving field ".concat(n,"'s value"),t.fieldApi.getFieldState()),t.shadow?I.set(this.savedValues,"shadow-".concat(n),t.fieldApi.getFieldState()):I.set(this.savedValues,n,t.fieldApi.getFieldState())),(r||!t.keepState&&!t.inMultistep||!t.fieldApi.getIsRelevant()&&!t.keepState)&&(Me("Removing field",n),this.fieldsById.delete(e),r||(I.delete(this.state.values,n),I.delete(this.state.touched,n),I.delete(this.state.errors,n),t.shadow?I.delete(this.savedValues,"shadow-".concat(n)):I.delete(this.savedValues,n)),r&&this.pulledOut[i]&&(Me("Pulling out",n,"with magic value",i),I.pullOut(this.state.values,i),I.pullOut(this.state.touched,i),I.pullOut(this.state.errors,i),I.pullOut(this.savedValues,i),delete this.pulledOut[i])),this.emit("change")}},{key:"expectRemoval",value:function(e){Me("Expecting removal of",e),this.expectedRemovals[e]=!0,this.pulledOut[e]=!0}},{key:"update",value:function(e,t,n){Me("Update",e,t.field,n,t.fieldState.value);var r=t.fieldApi.getValue(),i=t.fieldApi.getError(),a=t.fieldApi.getTouched(),o=this.fieldsByName.get(n);n&&!o&&(I.set(this.state.values,n),I.set(this.state.errors,n),I.set(this.state.touched,n)),I.set(this.state.values,t.field,r),I.set(this.state.errors,t.field,i),I.set(this.state.touched,t.field,a),this.emit("change")}}]),e}(),Le=S("informed:FormProvider\t\t"),Ue=function(e){var t=e.children,n=e.formApi,i=e.formController,a=e.formState,o=v(e,["children","formApi","formController","formState"]);if(Le("Render FormProvider"),n)return Le("Render FormProvider with given values"),r.createElement(P.Provider,{value:i.updater},r.createElement(j.Provider,{value:n},r.createElement(T.Provider,{value:a},t)));Le("Render FormProvider with generated values");var l=_e(o);return r.createElement(P.Provider,{value:l.formController.updater},r.createElement(j.Provider,{value:l.formApi},r.createElement(T.Provider,{value:l.formState},t)))},$e=S("informed:useForm\t\t"),_e=function(e){var t=e.dontPreventDefault,n=e.initialValues,i=e.validate,a=e.validateFields,o=e.allowEmptyStrings,l=e.preventEnter,u=e.getApi,s=e.apiRef,c=e.onChange,d=e.onReset,f=e.onSubmit,h=e.onValueChange,p=e.onSubmitFailure,g=e.validationSchema,y=e.schema,b=e.ajv,F=e.fieldMap,C=e.onlyValidateSchema,S=v(e,["dontPreventDefault","initialValues","validate","validateFields","allowEmptyStrings","preventEnter","getApi","apiRef","onChange","onReset","onSubmit","onValueChange","onSubmitFailure","validationSchema","schema","ajv","fieldMap","onlyValidateSchema"]);$e("Render useForm");var E=(0,r.useMemo)((function(){return{dontPreventDefault:t,initialValues:n,validate:i,validateFields:a,allowEmptyStrings:o,preventEnter:l,validationSchema:g,schema:y,ajv:b,fieldMap:F}}),[t,n,i,a,o,l,g,y,b,F]),V=m((0,r.useState)((function(){return new Ne(E)})),1)[0];(0,r.useEffect)((function(){V.setOptions(E)}),[E]),ee((function(){V.mount()}),[]);var k=m((0,r.useState)((function(){return V.getFormState()})),2),A=k[0],x=k[1];ee((function(){var e=function(){return c&&c(V.getFormState())},t=function(){return d&&d()},n=function(){return f&&f(V.getFormState().values)},r=function(){return h&&h(V.getFormState().values)},i=function(){return p&&p(V.getFormState().errors)};return V.on("change",e),V.on("reset",t),V.on("submit",n),V.on("value",r),V.on("failure",i),function(){V.removeListener("change",e),V.removeListener("reset",t),V.removeListener("submit",n),V.removeListener("value",r),V.removeListener("failure",i)}}),[c,d,f,h,p]),(0,r.useState)((function(){V.on("change",(function(){$e("Setting form state"),x(V.getFormState())})),u&&u(V.getFormApi()),s&&(s.current=V.getFormApi())}));var w=m((0,r.useState)((function(){return V.getFormApi()})),1)[0];return{formApi:w,formState:A,formController:V,render:function(e){return r.createElement(Ue,{formApi:w,formState:A,formController:V},r.createElement(r.Fragment,null,e||r.createElement(Te,{schema:y,onlyValidateSchema:C})))},userProps:S}},qe=S("informed:Form\t\t"),We=function(e){var t=e.children,n=e.render,i=e.component,a=v(e,["children","render","component"]);qe("Render FORM");var o,l=_e(a),u=l.formApi,c=l.formController,d=l.formState,f=l.render,h=l.userProps;return f(r.createElement("form",s({},h,{onReset:c.reset,onSubmit:c.submitForm,onKeyDown:c.keyDown}),(o={formState:d,formApi:u},i?r.createElement(i,o,t):n?n(o):"function"==typeof t?t(o):t)))}}}]);